{% extends '::fb_base.html.twig' %}

{% block title %}Signup Fourth Step{% endblock %}

{% block pageTitle %}Signup Fourth Step{% endblock %}

{% block stylesheets %}
{{ parent() }}
<link href="{{ asset('css/jquery-ui-1.8.24.custom.css') }}" rel="stylesheet" type="text/css"/>
<style>
    #tooltip{color:#444;font-size:12px;text-shadow:1px 1px 0 #fff;border:1px solid #666;-moz-border-radius:5px;-webkit-border-radius:5px;border-radius:5px;background-repeat:repeat-x;background-position:left top;background-color:#D7D7D7;-moz-box-shadow:0 0 4px #bbb;-webkit-box-shadow:0 0 4px #bbb;box-shadow:0 0 4px #bbb;line-height:1.2em;position:absolute;z-index:100000;display:none;padding:5px}
</style>
{% endblock %}

{% block body %}

        {% if form_errors(form) %}
        <div class="alert alert-error">
            <button data-dismiss="alert" class="close" type="button"> &times; </button>
            {{ form_errors(form) }}
        </div>
        {% endif %}

        <div class="container Main-content">

            <div class="Student">

                <ul class="nav nav-tabs">
                    <li><a href="{{ path('fb_signup_education') }}">Education</a></li>
                    <li class="active"><a href="{{ path('fb_signup_language') }}">Languages</a></li>
                    <li><a href="{{ path('fb_signup_cv') }}">Objectives</a></li>
                    <li><a href="{{ path('fb_signup_cv_skills') }}">Skills</a></li>
                    <li><a href="{{ path('fb_signup_cv_experience') }}">Experience</a></li>
                    <li class="pull-right span3"><h3>Strength of Profile</h3></li>
                </ul>

                <div class="row-fluid show-grid">

                    <div class="span8">
                        <form class="company-form" action="{{ path('fb_signup_language') }}" method="post">
                            <legend><h2>{% if formName %}{{ formName }}{% endif %}</h2></legend>

                            <fieldset>
                                <p>{% if formDesc %}{{ formDesc }}{% endif %}</p>
                                <div class="Add-links">
                                    <a href="javascript:void(0)" title="Add" class="add-btn btnAdd"></a>
                                </div><!--Add-links-->
                            </fieldset>

                            {% for userLanguage in form.languages %}
                            <fieldset>
                                <hr class="divider"/>
                                <div class="controls  row-fluid show-grid">
                                    <div  class="span9 select-box">
                                        <label>Language</label>
                                        {{ form_widget(userLanguage.language) }}

                                        <span style="display: inline-block;margin-bottom: 13px;">
                                            <img style="opacity: 1;" class="tooltip" title="Required Field" src="{{ asset('js/tooltip/required.png') }}" />
                                        </span>

                                        {% if form_errors(userLanguage.language) %}
                                        <div class="alert alert-error">
                                            <button type="button" class="close" data-dismiss="alert"> × </button>
                                            {{ form_errors(userLanguage.language) }}
                                        </div>
                                        {% endif %}
                                    </div>

                                    {% if not loop.first %}
                                    <div class="Add-links">
                                        <a href="javascript:void(0)" title="Remove" onclick="deleteSubForm(this);" class="Remove-btn"></a>
                                    </div><!--Add-links-->
                                    {% endif %}
                                </div>

                                <div class="controls  row-fluid show-grid">
                                    <div class="span3 select-box">
                                        <label>Spoken</label>
                                        {{ form_widget(userLanguage.spokenFluency) }}

                                        <span style="display: inline-block;margin-bottom: 13px;">
                                            <img style="opacity: 1;" class="tooltip" title="Required Field" src="{{ asset('js/tooltip/required.png') }}" />
                                        </span>

                                        {% if form_errors(userLanguage.spokenFluency) %}
                                        <div class="alert alert-error">
                                            <button type="button" class="close" data-dismiss="alert"> × </button>
                                            {{ form_errors(userLanguage.spokenFluency) }}
                                        </div>
                                        {% endif %}
                                    </div>
                                    <div class="span3 select-box">
                                        <label>Written</label>
                                        {{ form_widget(userLanguage.writtenFluency) }}

                                        <span style="display: inline-block;margin-bottom: 13px;">
                                            <img style="opacity: 1;" class="tooltip" title="Required Field" src="{{ asset('js/tooltip/required.png') }}" />
                                        </span>

                                        {% if form_errors(userLanguage.writtenFluency) %}
                                        <div class="alert alert-error">
                                            <button type="button" class="close" data-dismiss="alert"> × </button>
                                            {{ form_errors(userLanguage.writtenFluency) }}
                                        </div>
                                        {% endif %}
                                    </div>
                                    <div class="span3 select-box">
                                        <label>Read</label>
                                        {{ form_widget(userLanguage.readFluency) }}

                                        <span style="display: inline-block;margin-bottom: 13px;">
                                            <img style="opacity: 1;" class="tooltip" title="Required Field" src="{{ asset('js/tooltip/required.png') }}" />
                                        </span>

                                        {% if form_errors(userLanguage.readFluency) %}
                                        <div class="alert alert-error">
                                            <button type="button" class="close" data-dismiss="alert"> × </button>
                                            {{ form_errors(userLanguage.readFluency) }}
                                        </div>
                                        {% endif %}
                                    </div>
                                </div>
                            </fieldset>
                            {% endfor %}

                            <fieldset id="formActions">
                                <hr class="divider"/>
                                <div class="controls ">
                                    {{ form_rest(form) }}
                                    <button type="submit" class="btn btn-primary pull-right">Next</button>
                                    <a href="{{ path('fb_signup_cv') }}" class="pull-right back">Skip</a>
                                </div>
                            </fieldset>
                        </form>

                    </div><!--span 9-->

                    <div class="span4">
                        {% render "ObjectsInternJumpBundle:Task:fb_userMeter" %}
                    </div>

                </div><!--row-fluid show-grid-->

            </div><!---Student --->
        </div><!--container-->
{% endblock %}

{% block javascripts %}
{{ parent() }}
{% set formElementHTML %}
{% spaceless %}
<fieldset>
    <hr class="divider"/>
    <div class="controls  row-fluid show-grid">
        <div  class="span9 select-box">
            <label>Language</label>
            {{ form_widget(form.languages.vars.prototype.language) }}

            <span style="display: inline-block;margin-bottom: 13px;">
                <img style="opacity: 1;" class="tooltip" title="Required Field" src="{{ asset('js/tooltip/required.png') }}" />
            </span>
        </div>

        <div class="Add-links">
            <a href="javascript:void(0)" title="Remove" onclick="deleteSubForm(this);" class="Remove-btn"></a>
        </div><!--Add-links-->
    </div>

    <div class="controls  row-fluid show-grid">
        <div class="span3 select-box">
            <label>Spoken</label>
            {{ form_widget(form.languages.vars.prototype.spokenFluency) }}

            <span style="display: inline-block;margin-bottom: 13px;">
                <img style="opacity: 1;" class="tooltip" title="Required Field" src="{{ asset('js/tooltip/required.png') }}" />
            </span>
        </div>
        <div class="span3 select-box">
            <label>Written</label>
            {{ form_widget(form.languages.vars.prototype.writtenFluency) }}

            <span style="display: inline-block;margin-bottom: 13px;">
                <img style="opacity: 1;" class="tooltip" title="Required Field" src="{{ asset('js/tooltip/required.png') }}" />
            </span>
        </div>
        <div class="span3 select-box">
            <label>Read</label>
            {{ form_widget(form.languages.vars.prototype.readFluency) }}

            <span style="display: inline-block;margin-bottom: 13px;">
                <img style="opacity: 1;" class="tooltip" title="Required Field" src="{{ asset('js/tooltip/required.png') }}" />
            </span>
        </div>
    </div>
</fieldset>
{% endspaceless %}
{% endset %}
<script src="{{ asset('js/libs/jquery-ui-1.8.24.custom.min.js') }}" type="text/javascript"></script>
<script src="{{ asset('js/libs/jquery.livequery.js') }}" type="text/javascript"></script>
<script src="{{ asset('js/tooltip/tooltip.js') }}"></script>
<script>
    var formElementHTML = '{{ formElementHTML | escape('js') }}';
    function deleteSubForm(currentElement) {
        $(currentElement).parent().parent().parent().remove();
    }
    $(document).ready(function() {
        $('.select-box select').livequery(function() {
            $(this).selectbox();
        });
        $('.btnAdd').click(function() {
            var tempHtml = formElementHTML;
            var subFormNumbers = [];
            $('[name^="form[languages]"]').each(function(){
                subFormNumber = parseInt($(this).attr('name').match(/\d+/)[0]);
                if($.inArray(subFormNumber, subFormNumbers) == -1) {
                    subFormNumbers.push(subFormNumber);
                }
            });
            $('#formActions').before(tempHtml.replace(/\$\$name\$\$/g, (subFormNumbers.sort().pop() + 1)));
            $('html, body').animate({
                scrollTop: $('#formActions').prev().offset().top
            }, 2000);
        });
    });
</script>
{% endblock %}
